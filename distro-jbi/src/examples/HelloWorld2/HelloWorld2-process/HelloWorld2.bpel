<?xml version="1.0"?>
<process name="HelloWorld2"
        targetNamespace="urn:/HelloWorld2.bpel"
        xmlns="http://schemas.xmlsoap.org/ws/2004/03/business-process/"
        xmlns:bpws="http://schemas.xmlsoap.org/ws/2004/03/business-process/"
        xmlns:tns="urn:/HelloWorld2.bpel"
        xmlns:hello="urn:/HelloWorld2.wsdl"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema">

    <import location="HelloWorld2.wsdl"
            namespace="urn:/HelloWorld2.wsdl"
            importType="http://schemas.xmlsoap.org/wsdl/" />

    <partnerLinks>
        <partnerLink name="helloPartnerLink"
                partnerLinkType="hello:HelloPartnerLinkType"
                myRole="Provider" />
    </partnerLinks>

    <variables>
        <variable name="request" messageType="hello:HelloRequest"/>
        <variable name="response" messageType="hello:HelloResponse"/>
        <variable name="text" type="xsd:string"/>
    </variables>

    <sequence>
        <receive
                name="start"
                partnerLink="helloPartnerLink"
                portType="hello:HelloPortType"
                operation="Hello"
                variable="request"
                createInstance="yes"/>
                
        <assign name="assign1">
            <copy>
                <from>$request.body/hello:text</from>
                <to variable="text"/>
            </copy>
            <copy>
                <from>
                    <literal>
                        <hello:HelloResponse>
                            <hello:text/>
                        </hello:HelloResponse>
                    </literal>
                </from>
                <to>$response.body</to>
            </copy>
            <copy>
                <from>concat($text,' World')</from>
                <to>$response.body/hello:text</to>
            </copy>
        </assign>
        
        <reply name="end"
                partnerLink="helloPartnerLink"
                portType="hello:HelloPortType"
                operation="Hello"
                variable="response"/>
    </sequence>
</process>
