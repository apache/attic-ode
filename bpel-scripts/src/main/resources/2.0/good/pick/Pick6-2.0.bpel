<?xml version="1.0"?>
<!--
	Pick will be used to create process instance.
-->
<process name="pick6_onAlarm-2.0" 
	 targetNamespace="http://ode/bpel/unit-test" 
	 xmlns:bpws="http://schemas.xmlsoap.org/ws/2004/03/business-process/"
	 xmlns="http://schemas.xmlsoap.org/ws/2004/03/business-process/"
	 xmlns:tns="http://ode/bpel/unit-test"
	 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
	 xmlns:test="http://ode/bpel/unit-test.wsdl" 
	 suppressJoinFailure="yes">

  <import namespace="http://ode/bpel/unit-test.wsdl"
	  importType="http://schemas.xmlsoap.org/wsdl/"
	  location="Pick6-2.0.wsdl" />
  
  <partnerLinks>
    <partnerLink name="testPartnerLink" 
		 partnerLinkType="test:TestPartnerLinkType" 
		 myRole="me" />
  </partnerLinks>
  
   <variables>
     <variable name="var1" messageType="test:PickMessage"/>
  </variables>
  
  <sequence>   
    <receive name="startReceive"
	     partnerLink="testPartnerLink"
	     portType="test:TestPortType"
	     operation="pickOp1"
	     variable="var1"
	     createInstance="yes" />
    <pick name="pick1" createInstance="no">
      <onMessage partnerLink="testPartnerLink"
		 portType="test:TestPortType"
		 operation="pickOp2"
		 variable="var1">
		<assign>
		  <copy>
		    <from>'onMessage'</from>
		    <to>$var1/DataPart</to>
		  </copy>
		</assign>  	  
      </onMessage>
      <onAlarm>
		<until>$var1/DataPart</until>
		<assign>
		  <copy>
		    <from>'onAlarm'</from>
		    <to>$var1/DataPart</to>
		  </copy>
		</assign>
      </onAlarm>
    </pick>
    <reply name="endReply" 
	   operation="pickOp1" 
	   partnerLink="testPartnerLink"
	   portType="test:TestPortType" 
	   variable="var1"/>
  </sequence>
</process>
