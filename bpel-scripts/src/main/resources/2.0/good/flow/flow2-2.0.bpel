<process name="flow2-2.0"
  targetNamespace="http://ode/bpel/unit-test"
  xmlns:bpws="http://schemas.xmlsoap.org/ws/2004/03/business-process/"
  xmlns="http://schemas.xmlsoap.org/ws/2004/03/business-process/"
  xmlns:tns="http://ode/bpel/unit-test"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:test="http://ode/bpel/unit-test.wsdl"
  suppressJoinFailure="yes">

  <import importType="http://schemas.xmlsoap.org/wsdl/"
    location="test.wsdl"
    namespace="http://ode/bpel/unit-test.wsdl" />

  <partnerLinks>
    <partnerLink name="testPartnerLink"
      partnerLinkType="test:TestPartnerLinkType"
      myRole="me" />
  </partnerLinks>

  <variables>
    <variable name="var1" messageType="test:TestMessage1"/>
    <variable name="tmp1" type="xsd:string"/>
    <variable name="tmp2" type="xsd:string"/>
  </variables>

  <sequence>
    <receive name="startReceive"
      createInstance="yes"
      partnerLink="testPartnerLink"
      portType="test:TestPortType"
      operation="testOperation"
      variable="var1"/>
    <flow>
      <links>
        <link name="link-a"/>
      </links>

      <empty name="a">
        <!-- transition condition will not be satisfied -->
        <sources>
          <source linkName="link-a">
            <transitionCondition>
	      $var1/TestPart = '123'
            </transitionCondition>
          </source>
        </sources>
      </empty>
      <assign name="b" suppressJoinFailure="yes">
        <targets>
          <target linkName="link-a"/>
        </targets>
        <copy>
          <from>'def'</from>
          <to>$var1/TestPart</to>
        </copy>
      </assign>

    </flow>
    <reply name="endReply"
      operation="testOperation"
      partnerLink="testPartnerLink"
      portType="test:TestPortType"
      variable="var1"/>

  </sequence>

</process>
